

<!DOCTYPE html>


<html lang="en" data-content_root="" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.19: https://docutils.sourceforge.io/" />

    <title>Testing code &#8212; SEPwC  documentation</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "light";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="_static/styles/theme.css?digest=5b4479735964841361fd" rel="stylesheet" />
<link href="_static/styles/bootstrap.css?digest=5b4479735964841361fd" rel="stylesheet" />
<link href="_static/styles/pydata-sphinx-theme.css?digest=5b4479735964841361fd" rel="stylesheet" />

  
  <link href="_static/vendor/fontawesome/6.1.2/css/all.min.css?digest=5b4479735964841361fd" rel="stylesheet" />
  <link rel="preload" as="font" type="font/woff2" crossorigin href="_static/vendor/fontawesome/6.1.2/webfonts/fa-solid-900.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="_static/vendor/fontawesome/6.1.2/webfonts/fa-brands-400.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="_static/vendor/fontawesome/6.1.2/webfonts/fa-regular-400.woff2" />

    <link rel="stylesheet" type="text/css" href="_static/pygments.css" />
    <link rel="stylesheet" href="_static/styles/sphinx-book-theme.css?digest=14f4ca6b54d191a8c7657f6c759bf11a5fb86285" type="text/css" />
    <link rel="stylesheet" type="text/css" href="_static/togglebutton.css" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="_static/scripts/bootstrap.js?digest=5b4479735964841361fd" />
<link rel="preload" as="script" href="_static/scripts/pydata-sphinx-theme.js?digest=5b4479735964841361fd" />
  <script src="_static/vendor/fontawesome/6.1.2/js/all.min.js?digest=5b4479735964841361fd"></script>

    <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
    <script src="_static/doctools.js"></script>
    <script src="_static/sphinx_highlight.js"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="_static/togglebutton.js"></script>
    <script src="_static/scripts/sphinx-book-theme.js?digest=5a5c038af52cf7bc1a1ec88eea08e6366ee68824"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'Testing_code';</script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Software development" href="Software_development.html" />
    <link rel="prev" title="Moving from spreadsheets to data" href="Spreadsheets_data.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <a class="skip-link" href="#main-content">Skip to main content</a>
  
  <div id="pst-scroll-pixel-helper"></div>

  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>
    Back to top
  </button>

  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__primary"
          id="__primary"/>
  <label class="overlay overlay-primary" for="__primary"></label>
  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__secondary"
          id="__secondary"/>
  <label class="overlay overlay-secondary" for="__secondary"></label>
  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
<form class="bd-search d-flex align-items-center"
      action="search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder="Search..."
         aria-label="Search..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
  </div>
  
    <nav class="bd-header navbar navbar-expand-lg bd-navbar">
    </nav>
  
  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      <div class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
    
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">

  

<a class="navbar-brand logo" href="index.html">
  
  
  
  
  
  
    <p class="title logo__title">SEPwC  documentation</p>
  
</a></div>
        <div class="sidebar-primary-item"><nav class="bd-links" id="bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item navbar-nav active">
        <p aria-level="2" class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul class="current nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="acknowledgements.html">Acknowledgements</a></li>
<li class="toctree-l1"><a class="reference internal" href="How_a_computer_works.html">How a computer works</a></li>
<li class="toctree-l1"><a class="reference internal" href="Licences.html">Software licences</a></li>
<li class="toctree-l1"><a class="reference internal" href="Code_basics.html">The fundamentals of code</a></li>
<li class="toctree-l1"><a class="reference internal" href="Algorithms.html">Thinking like a computer</a></li>
<li class="toctree-l1"><a class="reference internal" href="Python.html">Python: the fundamentals</a></li>
<li class="toctree-l1"><a class="reference internal" href="R.html">R: the fundamentals</a></li>
<li class="toctree-l1"><a class="reference internal" href="Issues.html">Solving issues and debugging</a></li>
<li class="toctree-l1"><a class="reference internal" href="Revision_control.html">Revision control with Git</a></li>
<li class="toctree-l1"><a class="reference internal" href="Python2.html">Python: part 2</a></li>
<li class="toctree-l1"><a class="reference internal" href="R2.html">R: part 2</a></li>
<li class="toctree-l1"><a class="reference internal" href="Python3.html">Python: part 3</a></li>
<li class="toctree-l1"><a class="reference internal" href="R3.html">R: part 3</a></li>
<li class="toctree-l1"><a class="reference internal" href="Spreadsheets_data.html">Moving from spreadsheets to data</a></li>
<li class="toctree-l1 current active"><a class="current reference internal" href="#">Testing code</a></li>
<li class="toctree-l1"><a class="reference internal" href="Software_development.html">Software development</a></li>
<li class="toctree-l1"><a class="reference internal" href="Mini_courses.html">Mini-courses</a></li>
<li class="toctree-l1"><a class="reference internal" href="genindex.html">Index</a></li>
</ul>

    </div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main">
        
        

<div class="sbt-scroll-pixel-helper"></div>

          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item"><label class="sidebar-toggle primary-toggle btn btn-sm" for="__primary" title="Toggle primary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
  <span class="fa-solid fa-bars"></span>
</label></div>
      
    </div>
  
  
    <div class="header-article-items__end">
      
        <div class="header-article-item">

<div class="article-header-buttons">


<a href="https://github.com/jhill1/SEPwC.github.io" target="_blank"
   class="btn btn-sm btn-source-repository-button"
   title="Source repository"
   data-bs-placement="bottom" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fab fa-github"></i>
  </span>

</a>






<div class="dropdown dropdown-download-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Download this page">
    <i class="fas fa-download"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="_sources/Testing_code.rst" target="_blank"
   class="btn btn-sm btn-download-source-button dropdown-item"
   title="Download source file"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="btn__text-container">.rst</span>
</a>
</li>
      
      
      
      
      <li>
<button onclick="window.print()"
  class="btn btn-sm btn-download-pdf-button dropdown-item"
  title="Print to PDF"
  data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="btn__text-container">.pdf</span>
</button>
</li>
      
  </ul>
</div>




<button onclick="toggleFullScreen()"
  class="btn btn-sm btn-fullscreen-button"
  title="Fullscreen mode"
  data-bs-placement="bottom" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>



<script>
document.write(`
  <button class="btn btn-sm navbar-btn theme-switch-button" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="theme-switch nav-link" data-mode="light"><i class="fa-solid fa-sun fa-lg"></i></span>
    <span class="theme-switch nav-link" data-mode="dark"><i class="fa-solid fa-moon fa-lg"></i></span>
    <span class="theme-switch nav-link" data-mode="auto"><i class="fa-solid fa-circle-half-stroke fa-lg"></i></span>
  </button>
`);
</script>


<script>
document.write(`
  <button class="btn btn-sm navbar-btn search-button search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass fa-lg"></i>
  </button>
`);
</script>
<label class="sidebar-toggle secondary-toggle btn btn-sm" for="__secondary"title="Toggle secondary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="fa-solid fa-list"></span>
</label>
</div></div>
      
    </div>
  
</div>
</div>
              
              

<div id="jb-print-docs-body" class="onlyprint">
    <h1>Testing code</h1>
    <!-- Table of contents -->
    <div id="print-main-content">
        <div id="jb-print-toc">
            
            <div>
                <h2> Contents </h2>
            </div>
            <nav aria-label="Page">
                <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#simple-testing">Simple testing</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#regression-tests">Regression tests</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#unit-tests">Unit tests</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#static-tests">Static tests</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#ui-tests">UI tests</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#testing-frameworks">Testing frameworks</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#python-pytest">Python: pytest</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#r-testthat">R: testthat</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#continuous-testing">Continuous testing</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#adding-a-workflow-to-your-repoistory">Adding a workflow to your repoistory</a></li>
</ul>
</li>
</ul>
            </nav>
        </div>
    </div>
</div>

              
                
<div id="searchbox"></div>
                <article class="bd-article" role="main">
                  
  <section id="testing-code">
<h1>Testing code<a class="headerlink" href="#testing-code" title="Permalink to this heading">#</a></h1>
<p>Youâ€™ve spend days writing the most elegant and beautiful code imaginable. Itâ€™s readable, well designed and runs quickly. How do you know it runs correctly? How do you know how easy it is to break? This is where testing comes in.</p>
<p>Testing is integral to writing software as otherwise there is no point in writing it. You will, of course, test in some way as you write code as you will run your code to check it doesnâ€™t give syntax errors at least! In this chapter youâ€™ll learn how to transition from informal <em>ad hoc</em> testing (simple testing), to automated testing (also known as unit testing). This will:</p>
<blockquote>
<div><ul class="simple">
<li><p>Fewer bugs. Because youâ€™re explicit about how your code should behave, you will have fewer bugs. The reason why is a bit like the reason double entry book-keeping works: because you describe the behaviour of your code in two places, both in your code and in your tests, you are able to check one against the other. With informal testing, itâ€™s tempting to just explore typical and authentic usage, similar to writing examples. However, when writing formal tests, itâ€™s natural to adopt a more adversarial mindset and to anticipate how unexpected inputs could break your code.</p></li>
<li><p>Better code structure. Code that is well designed tends to be easy to test and you can turn this to your advantage. If you are struggling to write tests, consider if the problem is actually the design of your function(s). The process of writing tests is a great way to get free, private, and personalized feedback on how well-factored your code is. Functions that are easier to test are usually easier to understand and re-combine in new ways.</p></li>
<li><p>Bug fixing. When we start to fix a bug, we first convert it into a (failing) test. This is wonderfully effective at making your goal very concrete: make this test pass. This is basically a special case of a general methodology known as test driven development (see later chapter on software development).</p></li>
<li><p>Robust code. If you know that all the major functionality of your package is well covered by the tests, you can confidently make big changes without worrying about accidentally breaking something.</p></li>
</ul>
</div></blockquote>
<p>In this chapter we will discover the different types of tests and how to formalise those tests into something that can be automated.</p>
<section id="simple-testing">
<h2>Simple testing<a class="headerlink" href="#simple-testing" title="Permalink to this heading">#</a></h2>
<p>Whilst most guides and internet sites deal with more formalised testing, we should start at a more fundamental level. Testing code invovled running it. You should run your code often to check for syntax errors and unexpected errors. Rather than spending hours writing code, then test; it is much more productiuve to write a block of code, then test the code to that point.</p>
<p>Basic testing involves created a subset of your input data (if any) and printing out variables to check they are what you expect them to be, given the data read in. This is <em>not</em> a robust method of testing code, but will give you confidence as you go along. This is also useful if you donâ€™t know <em>exactly</em> what youâ€™ll get after a block of code (e.g. from an external library). By printing it out, we can check what <code class="docutils literal notranslate"><span class="pre">type</span></code> and what the data looks like. In a formal test itâ€™s impossible to do that until you see the data anyway.</p>
<p>You <em>are</em> testing your code by running code like this, but informally. The problem will arise in a few months time when you come back to this and you will struggle to remember all the informal tests you ran. If you want to add a new feature youâ€™ll probbaly break some of the past informal tests.</p>
<p>Example of loading a dataset and checking it (strip all but header and three rows), print and check. Need to create an awkward data set to to make the point, e.g. getting datetimes correct and indexing.</p>
</section>
<section id="regression-tests">
<h2>Regression tests<a class="headerlink" href="#regression-tests" title="Permalink to this heading">#</a></h2>
<p>When it comes to formal testing, the first type of test is called a <em>regression test</em>. This takes a full run of the code and checks that output is what is expected. This could be based on theoretical consideration or from past executions of the code. The distinction to other kinds of tests is that the whole program is run from start to finish.</p>
<p>Examples of theorteical and past behaviour</p>
</section>
<section id="unit-tests">
<h2>Unit tests<a class="headerlink" href="#unit-tests" title="Permalink to this heading">#</a></h2>
<p>Whilst regression tests test the whole executation, unit tests only test a single function or object within the code. The generally check against theoretical results (or simple calculations) with strictly controlled input to the function. This is often where we test unexpected behaviour too; for example putting two strings into a function to add two numbers: do we get a sensible error message?</p>
<p>Unit tests are designed to test each function to the limits and make sure it returns the right answers and behaves correctly if the wrong kind of data is passed in. If all the programâ€™s functions are tested then, in theory, the whole program should work.</p>
<p>Unit tests also help with debugging. If a user reports a bug, the error message often gives the funciton that it occurred in. Using the userâ€™s data you can create a unit test to confirm the bug (replicate it). Then debug your code until that new test passes.</p>
<p>Examples; simple function with assert, assert nearly, etc.</p>
</section>
<section id="static-tests">
<h2>Static tests<a class="headerlink" href="#static-tests" title="Permalink to this heading">#</a></h2>
<p>The above tests involve running the code. Another type of testing is called static testing or <em>linting</em>. This checks the syntax of the code against specified standards. It was invted initiall for the C programming language where the programmer has to manage memory themselves and a linter helped spot potential issues there. For R and Python a linter check our code against published standards.</p>
<p>For Python, the standards are set by the community and written up as â€œPEPâ€ (Python Enhancement Proposal) documents. In R the standards are also community-based but with less formal acceptance. A common style used is the <code class="docutils literal notranslate"><span class="pre">tidyverse</span></code> style.</p>
<p>Regardless of the style chosen, the important thing is <em>consistancy</em>. Consistancy within functions/modules/objects is most important, consistancy within projects is next, consistancy across projects is least important. It is also important to know when to <em>break</em> consistancy. Your golden rule for breaking a linter recommendation is if it doesnâ€™t improve readability of the code. Code is read more than it is written and the computer doesnâ€™t care about readiability as long as itâ€™s valid syntax.</p>
<p>Whilst linters are valuable tools to check your consistancy they are not hard and fast rules to follow.</p>
<p>Examples from R and Python</p>
</section>
<section id="ui-tests">
<h2>UI tests<a class="headerlink" href="#ui-tests" title="Permalink to this heading">#</a></h2>
<p>User interface testing is perhaps the hardest thing to test. When presented with any type of user interface (GUI, CLI, or even through files) users will do the oddest things from your point of view as a programmer. This is normal as we are all the sum of our experiences. However, sticking to conventions helps ameleriote some fof the potentional issues here.</p>
<p>UI testing is a type of regression testing. You can automate CLI-based UIâ€™s easily. Automating GUIâ€™s is trcikier, but possible. For our purposes we will stick to CLIs.</p>
<p>Example of testing a CLI</p>
</section>
<section id="testing-frameworks">
<h2>Testing frameworks<a class="headerlink" href="#testing-frameworks" title="Permalink to this heading">#</a></h2>
<p>The tests above have been manual in nature. Testing comes into itâ€™s own when itâ€™s automated. It may still need to be initated manually (see below for fully automatic, continuous testing), but all tests are run and the results summarised automatically.</p>
<p>Both R and Python have testing frameworks; modules/libraries that help set-up, run and tear-down all tests in your code. Weâ€™ll cover each in turn, but skip to whichever language youâ€™ve chosen.</p>
<section id="python-pytest">
<h3>Python: pytest<a class="headerlink" href="#python-pytest" title="Permalink to this heading">#</a></h3>
<p>Python has a few testing packages. <code class="docutils literal notranslate"><span class="pre">pytest</span></code> is a very common one. It</p>
<p>Weâ€™re going to test our Farenheit to Celcius and vice-vera functions from the first Python chapter. Letâ€™s get these two functions in an Python test file and save it:</p>
<div class="highlight-Python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">toFarenheit</span><span class="p">(</span><span class="n">Centigrade</span><span class="p">):</span>

    <span class="n">F</span> <span class="o">=</span> <span class="mf">9.0</span><span class="o">/</span><span class="mf">5.0</span><span class="o">*</span><span class="n">Centigrade</span> <span class="o">+</span> <span class="mf">32.0</span>

    <span class="k">return</span> <span class="n">F</span>

<span class="k">def</span> <span class="nf">toCentigrade</span><span class="p">(</span><span class="n">Farenheit</span><span class="p">):</span>

    <span class="n">C</span> <span class="o">=</span>  <span class="p">(</span><span class="n">Farenheit</span> <span class="o">-</span> <span class="mi">32</span><span class="p">)</span> <span class="o">*</span> <span class="mi">5</span><span class="o">/</span><span class="mi">9</span><span class="p">;</span>

    <span class="k">return</span> <span class="n">C</span>
</pre></div>
</div>
<p>Save the contents as <code class="docutils literal notranslate"><span class="pre">temperature_conversion.py</span></code>.</p>
<p>We can then use a seperate file to create our tests. <code class="docutils literal notranslate"><span class="pre">pytest</span></code> is largely automated in terms of finding and running tests; we simply need to stick to a naming convention of having <code class="docutils literal notranslate"><span class="pre">test_*.py</span></code> or <code class="docutils literal notranslate"><span class="pre">*_test.py</span></code> in the filename. <code class="docutils literal notranslate"><span class="pre">pytest</span> <span class="pre">will</span> <span class="pre">then</span> <span class="pre">find</span> <span class="pre">and</span> <span class="pre">run</span> <span class="pre">those</span> <span class="pre">files</span> <span class="pre">in</span> <span class="pre">the</span> <span class="pre">current</span> <span class="pre">directory</span> <span class="pre">and</span> <span class="pre">any</span> <span class="pre">subdirectories.</span> <span class="pre">You</span> <span class="pre">can</span> <span class="pre">organise</span> <span class="pre">your</span> <span class="pre">tests</span> <span class="pre">into</span> <span class="pre">files,</span> <span class="pre">with</span> <span class="pre">our</span> <span class="pre">without</span> <span class="pre">classes.</span> <span class="pre">If</span> <span class="pre">you</span> <span class="pre">do</span> <span class="pre">you</span> <span class="pre">a</span> <span class="pre">class</span> <span class="pre">it</span> <span class="pre">*must*</span> <span class="pre">begin</span> <span class="pre">with</span> <span class="pre">&quot;Test&quot;.</span> <span class="pre">For</span> <span class="pre">our</span> <span class="pre">check</span> <span class="pre">on</span> <span class="pre">the</span> <span class="pre">above</span> <span class="pre">two</span> <span class="pre">functions</span> <span class="pre">we</span> <span class="pre">will</span> <span class="pre">create</span> <span class="pre">a</span> <span class="pre">single</span> <span class="pre">class,</span> <span class="pre">with</span> <span class="pre">three</span> <span class="pre">methods</span> <span class="pre">to</span> <span class="pre">run</span> <span class="pre">a</span> <span class="pre">total</span> <span class="pre">of</span> <span class="pre">five</span> <span class="pre">tests.</span> <span class="pre">Create</span> <span class="pre">a</span> <span class="pre">file</span> <span class="pre">called</span> <span class="pre">``test_temperature_conversion.py</span></code> (note the filename convention here, prepend <code class="docutils literal notranslate"><span class="pre">test_</span></code> to the filname of the thing youâ€™re testing).</p>
<div class="highlight-Python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">pytest</span>
<span class="kn">import</span> <span class="nn">temperature_conversion</span>

<span class="k">class</span> <span class="nc">TestTemperatureConversion</span><span class="p">():</span>

    <span class="k">def</span> <span class="nf">test_c_to_f</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>

        <span class="n">temp_c</span> <span class="o">=</span> <span class="n">temperature_conversion</span><span class="o">.</span><span class="n">toCentigrade</span><span class="p">(</span><span class="mi">50</span><span class="p">)</span>

        <span class="k">assert</span> <span class="n">temp_c</span><span class="o">==</span><span class="mi">10</span>
        <span class="k">assert</span> <span class="nb">type</span><span class="p">(</span><span class="n">temp_c</span><span class="p">)</span><span class="o">==</span><span class="nb">float</span>

    <span class="k">def</span> <span class="nf">test_f_to_c</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>

        <span class="n">temp_f</span> <span class="o">=</span> <span class="n">temperature_conversion</span><span class="o">.</span><span class="n">toFarenheit</span><span class="p">(</span><span class="mi">10</span><span class="p">)</span>

        <span class="k">assert</span> <span class="n">temp_f</span> <span class="o">==</span> <span class="mi">50</span>
        <span class="k">assert</span> <span class="nb">type</span><span class="p">(</span><span class="n">temp_f</span><span class="p">)</span> <span class="o">==</span> <span class="nb">float</span>

    <span class="k">def</span> <span class="nf">test_that_will_fail</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">temp_c</span> <span class="o">=</span> <span class="n">temperature_conversion</span><span class="o">.</span><span class="n">toCentigrade</span><span class="p">(</span><span class="mi">50</span><span class="p">)</span>

        <span class="k">assert</span> <span class="n">temp_c</span> <span class="o">==</span> <span class="mi">2</span>
</pre></div>
</div>
<p>We can run that from the command line:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>pytest test_temperature_conversion.py
</pre></div>
</div>
<p>which gives the output:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="o">=================================</span> <span class="nb">test</span> session <span class="nv">starts</span> <span class="o">=================================</span>
platform linux -- Python <span class="m">3</span>.6.9, pytest-6.2.4, py-1.10.0, pluggy-0.13.1
rootdir: /home/jh1889/work/teaching/SEPwC/code_examples
collected <span class="m">3</span> items

test_temperature_conversion.py ..F                                              <span class="o">[</span><span class="m">100</span>%<span class="o">]</span>

<span class="o">======================================</span> <span class="nv">FAILURES</span> <span class="o">=======================================</span>
____________________ TestTemperatureConversion.test_that_will_fail ____________________

<span class="nv">self</span> <span class="o">=</span> &lt;test_temperature_conversion.TestTemperatureConversion object at 0x7fb900264518&gt;

    def test_that_will_fail<span class="o">(</span>self<span class="o">)</span>:
        <span class="nv">temp_c</span> <span class="o">=</span> temperature_conversion.toCentigrade<span class="o">(</span><span class="m">50</span><span class="o">)</span>

&gt;       assert <span class="nv">temp_c</span> <span class="o">==</span> <span class="m">2</span>
E       assert <span class="m">10</span>.0 <span class="o">==</span> <span class="m">2</span>

test_temperature_conversion.py:23: <span class="nv">AssertionError</span>
<span class="o">===============================</span> short <span class="nb">test</span> summary <span class="nv">info</span> <span class="o">===============================</span>
FAILED test_temperature_conversion.py::TestTemperatureConversion::test_that_will_fail
<span class="o">=============================</span> <span class="m">1</span> failed, <span class="m">2</span> passed <span class="k">in</span> <span class="m">0</span>.15s <span class="o">=============================</span>
</pre></div>
</div>
<p>This gives a summary of the system, including the version of Python and pytest; the directory the test was run from and the number of tests (3). The main results comes next with the filename and <code class="docutils literal notranslate"><span class="pre">..F</span></code>. This tells us 2 tests have passed and one has failed. Details of the failure are then posted underneath, with the line of code and then (very useful) the values used in the assertion.</p>
<p>You may not want to run all the tests; just a specific test. We can tell pytest to do just that:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>pytest test_temperature_conversion.py::TestTemperatureConversion::test_that_will_fail
</pre></div>
</div>
<p>This runs just the test named <code class="docutils literal notranslate"><span class="pre">test_that_will_fail</span></code> in the class <code class="docutils literal notranslate"><span class="pre">TestTemperatureConversion</span></code> in the file <code class="docutils literal notranslate"><span class="pre">test_temperature_conversion.py</span></code></p>
<p><code class="docutils literal notranslate"><span class="pre">pytest</span></code> has a lot of other useful features such as marking tests, checking for wanted exceptions and fixtures. Have a look around the documentation of pytest to learn more.</p>
</section>
<section id="r-testthat">
<h3>R: testthat<a class="headerlink" href="#r-testthat" title="Permalink to this heading">#</a></h3>
<p>The first thing that you need to do is install the testthat R package. This can be done from CRAN using the code below.</p>
<div class="highlight-R notranslate"><div class="highlight"><pre><span></span><span class="nf">install.packages</span><span class="p">(</span><span class="s">&quot;testthat&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>Once testthat is installed, you can load it into your R sessions just like any other R package.</p>
<div class="highlight-R notranslate"><div class="highlight"><pre><span></span><span class="nf">library</span><span class="p">(</span><span class="n">testthat</span><span class="p">)</span>
</pre></div>
</div>
<p>Weâ€™re going to test our Farenheit to Celcius and vice-vera functions from the first R chapter. Letâ€™s get these two functions in an R test file and save it:</p>
<div class="highlight-R notranslate"><div class="highlight"><pre><span></span><span class="n">F_to_C</span> <span class="o">&lt;-</span> <span class="nf">function</span><span class="p">(</span><span class="n">F_temp</span><span class="p">){</span>
    <span class="n">C_temp</span> <span class="o">&lt;-</span> <span class="p">(</span><span class="n">F_temp</span> <span class="o">-</span> <span class="m">32</span><span class="p">)</span> <span class="o">*</span> <span class="m">5</span><span class="o">/</span><span class="m">9</span><span class="p">;</span>
    <span class="nf">return</span><span class="p">(</span><span class="n">C_temp</span><span class="p">);</span>
<span class="p">}</span>

<span class="n">C_to_F</span> <span class="o">&lt;-</span> <span class="nf">function</span><span class="p">(</span><span class="n">C_temp</span><span class="p">){</span>
    <span class="n">F_temp</span> <span class="o">&lt;-</span> <span class="p">(</span><span class="n">C_temp</span> <span class="o">*</span> <span class="m">9</span><span class="o">/</span><span class="m">5</span><span class="p">)</span> <span class="o">+</span> <span class="m">32</span><span class="p">;</span>
    <span class="nf">return</span><span class="p">(</span><span class="n">F_temp</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Save the contents as <code class="docutils literal notranslate"><span class="pre">temperature_conversion.R</span></code>.</p>
<p>We use the <code class="docutils literal notranslate"><span class="pre">test_that</span></code> function of the testthat package to write sime simple tests for our two functions. The <code class="docutils literal notranslate"><span class="pre">test_that</span></code> function follows a simple structure with two arguments: <code class="docutils literal notranslate"><span class="pre">desc</span></code> provides a description (in quotes) of whatever is being tested, and <code class="docutils literal notranslate"><span class="pre">code</span></code> provides whatever code (within curly brackets) to test.</p>
<p>Within the bracketed code to be tested, one or more <code class="docutils literal notranslate"><span class="pre">expect_that</span></code> functions are run; each call to <code class="docutils literal notranslate"><span class="pre">expect_that</span></code> is an independent test. The <code class="docutils literal notranslate"><span class="pre">expect_that</span></code> function takes two arguments: <code class="docutils literal notranslate"><span class="pre">object</span></code> is the object that is being examined by the function and <code class="docutils literal notranslate"><span class="pre">condition</span></code> is the condition that the object is meant to satisfy.</p>
<div class="highlight-R notranslate"><div class="highlight"><pre><span></span><span class="nf">test_that</span><span class="p">(</span><span class="n">desc</span> <span class="o">=</span> <span class="s">&quot;Fahrenheit to Celsius&quot;</span><span class="p">,</span> <span class="n">code</span> <span class="o">=</span> <span class="p">{</span>

  <span class="n">temp_C</span> <span class="o">&lt;-</span> <span class="nf">F_to_C</span><span class="p">(</span><span class="m">50</span><span class="p">);</span>

  <span class="c1"># Test that the result is the correct value</span>
  <span class="nf">expect_that</span><span class="p">(</span> <span class="n">object</span> <span class="o">=</span> <span class="n">temp_C</span><span class="p">,</span> <span class="n">condition</span> <span class="o">=</span> <span class="nf">equals</span><span class="p">(</span><span class="m">10</span><span class="p">)</span> <span class="p">);</span>

  <span class="c1"># Test that the result is numeric</span>
  <span class="nf">expect_that</span><span class="p">(</span> <span class="n">object</span> <span class="o">=</span> <span class="nf">is.numeric</span><span class="p">(</span><span class="n">temp_C</span><span class="p">),</span> <span class="n">condition</span> <span class="o">=</span> <span class="nf">equals</span><span class="p">(</span><span class="kc">TRUE</span><span class="p">)</span> <span class="p">);</span>
<span class="p">})</span>
</pre></div>
</div>
<p>We can create the same test for the <code class="docutils literal notranslate"><span class="pre">C_to_F</span></code> function:</p>
<div class="highlight-R notranslate"><div class="highlight"><pre><span></span><span class="nf">test_that</span><span class="p">(</span><span class="n">desc</span> <span class="o">=</span> <span class="s">&quot;Celsius to Fahrenheit&quot;</span><span class="p">,</span> <span class="n">code</span> <span class="o">=</span> <span class="p">{</span>

  <span class="n">temp_F</span> <span class="o">&lt;-</span> <span class="nf">C_to_F</span><span class="p">(</span><span class="m">10</span><span class="p">);</span>

  <span class="c1"># Test that the result is the correct value</span>
  <span class="nf">expect_that</span><span class="p">(</span> <span class="n">object</span> <span class="o">=</span> <span class="n">temp_F</span><span class="p">,</span> <span class="n">condition</span> <span class="o">=</span> <span class="nf">equals</span><span class="p">(</span><span class="m">50</span><span class="p">)</span> <span class="p">);</span>

  <span class="c1"># Test that the result is numeric</span>
  <span class="nf">expect_that</span><span class="p">(</span> <span class="n">object</span> <span class="o">=</span> <span class="nf">is.numeric</span><span class="p">(</span><span class="n">temp_F</span><span class="p">),</span> <span class="n">condition</span> <span class="o">=</span> <span class="nf">equals</span><span class="p">(</span><span class="kc">TRUE</span><span class="p">)</span> <span class="p">);</span>
<span class="p">})</span>
</pre></div>
</div>
<p>You can run those two tests if youâ€™ve compied them into your R session (along with the <code class="docutils literal notranslate"><span class="pre">temperature_conversion.R</span></code> file: hint <code class="docutils literal notranslate"><span class="pre">source</span></code>).</p>
<p>The better idea is to simply run all the tests at once. So letâ€™s create a test file with the following contents (includign a fake test that will fail).</p>
<div class="highlight-R notranslate"><div class="highlight"><pre><span></span><span class="nf">library</span><span class="p">(</span><span class="n">testthat</span><span class="p">);</span>
<span class="nf">context</span><span class="p">(</span><span class="s">&quot;Temperature function testing&quot;</span><span class="p">);</span>
<span class="nf">source</span><span class="p">(</span><span class="s">&quot;temperature_conversion.R&quot;</span><span class="p">);</span>

<span class="nf">test_that</span><span class="p">(</span><span class="s">&quot;Fahrenheit to Celsius&quot;</span><span class="p">,</span> <span class="p">{</span>

  <span class="n">temp_C</span> <span class="o">&lt;-</span> <span class="nf">F_to_C</span><span class="p">(</span><span class="m">50</span><span class="p">);</span>

  <span class="c1"># Test that the result is numeric</span>
  <span class="nf">expect_that</span><span class="p">(</span> <span class="nf">is.numeric</span><span class="p">(</span><span class="n">temp_C</span><span class="p">),</span> <span class="nf">equals</span><span class="p">(</span><span class="kc">TRUE</span><span class="p">)</span> <span class="p">);</span>

  <span class="c1"># Test that the result is the correct value</span>
  <span class="nf">expect_that</span><span class="p">(</span> <span class="n">temp_C</span><span class="p">,</span> <span class="nf">equals</span><span class="p">(</span><span class="m">10</span><span class="p">)</span> <span class="p">);</span>
<span class="p">})</span>

<span class="nf">test_that</span><span class="p">(</span><span class="s">&quot;Celsius to Fahrenheit&quot;</span><span class="p">,</span> <span class="p">{</span>

  <span class="n">temp_F</span> <span class="o">&lt;-</span> <span class="nf">C_to_F</span><span class="p">(</span><span class="m">10</span><span class="p">);</span>

  <span class="c1"># Test that the result is numeric</span>
  <span class="nf">expect_that</span><span class="p">(</span> <span class="nf">is.numeric</span><span class="p">(</span><span class="n">temp_F</span><span class="p">),</span> <span class="nf">equals</span><span class="p">(</span><span class="kc">TRUE</span><span class="p">)</span> <span class="p">);</span>

  <span class="c1"># Test that the result is the correct value</span>
  <span class="nf">expect_that</span><span class="p">(</span> <span class="n">temp_F</span><span class="p">,</span> <span class="nf">equals</span><span class="p">(</span><span class="m">50</span><span class="p">)</span> <span class="p">);</span>
<span class="p">})</span>

<span class="c1"># This test will fail</span>
<span class="nf">test_that</span><span class="p">(</span><span class="n">desc</span> <span class="o">=</span> <span class="s">&quot;Fahrenheit to Celsius wrong&quot;</span><span class="p">,</span> <span class="n">code</span> <span class="o">=</span> <span class="p">{</span>
    <span class="n">temp_F</span> <span class="o">&lt;-</span> <span class="nf">F_to_C</span><span class="p">(</span><span class="m">50</span><span class="p">);</span>
    <span class="nf">expect_that</span><span class="p">(</span> <span class="n">object</span> <span class="o">=</span> <span class="n">temp_F</span><span class="p">,</span> <span class="n">condition</span> <span class="o">=</span> <span class="nf">equals</span><span class="p">(</span><span class="m">2</span><span class="p">)</span> <span class="p">);</span>
<span class="p">})</span>
</pre></div>
</div>
<p>Save that as <code class="docutils literal notranslate"><span class="pre">test-temperature_conversion.R</span></code> (note the convention here; use the same filename as what is to be tested, with <code class="docutils literal notranslate"><span class="pre">test-</span></code> pre-pended).</p>
<p>We can run that from the command line:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>Rscript test-temperature_conversion.R
</pre></div>
</div>
<p>which gives the output:</p>
<div class="highlight-R notranslate"><div class="highlight"><pre><span></span><span class="n">Test</span> <span class="n">passed</span> ğŸŠ
<span class="n">Test</span> <span class="n">passed</span> ğŸ¥³
â”€â”€ <span class="nf">Failure </span><span class="p">(</span><span class="o">???</span><span class="p">)</span><span class="o">:</span> <span class="n">Fahrenheit</span> <span class="n">to</span> <span class="n">Celsius</span> <span class="n">wrong</span> â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
<span class="n">`x`</span> <span class="n">not</span> <span class="n">equal</span> <span class="n">to</span> <span class="n">`expected`.</span>
<span class="m">1</span><span class="o">/</span><span class="m">1</span> <span class="n">mismatches</span>
<span class="p">[</span><span class="m">1</span><span class="p">]</span> <span class="m">10</span> <span class="o">-</span> <span class="m">2</span> <span class="o">==</span> <span class="m">8</span>
<span class="n">Backtrace</span><span class="o">:</span>
    â–†
 <span class="m">1</span><span class="n">.</span> â””â”€<span class="n">testthat</span><span class="o">::</span><span class="nf">expect_that</span><span class="p">(</span><span class="n">object</span> <span class="o">=</span> <span class="n">temp_F</span><span class="p">,</span> <span class="n">condition</span> <span class="o">=</span> <span class="nf">equals</span><span class="p">(</span><span class="m">2</span><span class="p">))</span>
 <span class="m">2</span><span class="n">.</span>   â””â”€<span class="nf">testthat </span><span class="p">(</span><span class="n">local</span><span class="p">)</span> <span class="nf">condition</span><span class="p">(</span><span class="n">object</span><span class="p">)</span>
 <span class="m">3</span><span class="n">.</span>     â””â”€<span class="n">testthat</span><span class="o">::</span><span class="nf">expect_equal</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">expected</span><span class="p">,</span> <span class="kc">...</span><span class="p">,</span> <span class="n">expected.label</span> <span class="o">=</span> <span class="n">label</span><span class="p">)</span>

<span class="n">Error</span> <span class="n">in</span> <span class="n">reporter</span><span class="o">$</span><span class="nf">stop_if_needed</span><span class="p">()</span> <span class="o">:</span> <span class="n">Test</span> <span class="n">failed</span>
<span class="n">Calls</span><span class="o">:</span> <span class="n">test_that</span> <span class="o">-&gt;</span> <span class="o">&lt;</span><span class="n">Anonymous</span><span class="o">&gt;</span>
<span class="n">Execution</span> <span class="n">halted</span>
</pre></div>
</div>
<p>If youâ€™re in an R session you can run all tests in a directory:</p>
<div class="highlight-R notranslate"><div class="highlight"><pre><span></span><span class="nf">test_dir</span><span class="p">(</span><span class="s">&quot;.&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>which gives the output:</p>
<div class="highlight-R notranslate"><div class="highlight"><pre><span></span>âœ” <span class="o">|</span> <span class="bp">F</span> <span class="n">W</span> <span class="n">S</span>  <span class="n">OK</span> <span class="o">|</span> <span class="n">Context</span>
âœ– <span class="o">|</span> <span class="m">1</span>       <span class="m">4</span> <span class="o">|</span> <span class="n">Temperature</span> <span class="n">function</span> <span class="n">testing</span>
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
<span class="nf">Failure </span><span class="p">(</span><span class="n">test</span><span class="o">-</span><span class="n">temperature_conversion.R</span><span class="o">:</span><span class="m">30</span><span class="o">:</span><span class="m">5</span><span class="p">)</span><span class="o">:</span> <span class="n">Fahrenheit</span> <span class="n">to</span> <span class="n">Celsius</span> <span class="n">wrong</span>
<span class="n">`x`</span> <span class="n">not</span> <span class="n">equal</span> <span class="n">to</span> <span class="n">`expected`.</span>
<span class="m">1</span><span class="o">/</span><span class="m">1</span> <span class="n">mismatches</span>
<span class="p">[</span><span class="m">1</span><span class="p">]</span> <span class="m">10</span> <span class="o">-</span> <span class="m">2</span> <span class="o">==</span> <span class="m">8</span>
<span class="n">Backtrace</span><span class="o">:</span>
    â–†
 <span class="m">1</span><span class="n">.</span> â””â”€<span class="n">testthat</span><span class="o">::</span><span class="nf">expect_that</span><span class="p">(</span><span class="n">object</span> <span class="o">=</span> <span class="n">temp_F</span><span class="p">,</span> <span class="n">condition</span> <span class="o">=</span> <span class="nf">equals</span><span class="p">(</span><span class="m">2</span><span class="p">))</span> <span class="n">at</span> <span class="n">test</span><span class="o">-</span><span class="n">temperature_conversion.R</span><span class="o">:</span><span class="m">30</span><span class="o">:</span><span class="m">4</span>
 <span class="m">2</span><span class="n">.</span>   â””â”€<span class="nf">testthat </span><span class="p">(</span><span class="n">local</span><span class="p">)</span> <span class="nf">condition</span><span class="p">(</span><span class="n">object</span><span class="p">)</span>
 <span class="m">3</span><span class="n">.</span>     â””â”€<span class="n">testthat</span><span class="o">::</span><span class="nf">expect_equal</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">expected</span><span class="p">,</span> <span class="kc">...</span><span class="p">,</span> <span class="n">expected.label</span> <span class="o">=</span> <span class="n">label</span><span class="p">)</span>
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€

â•â• <span class="n">Results</span> â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
â”€â”€ <span class="n">Failed</span> <span class="n">tests</span> â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
<span class="nf">Failure </span><span class="p">(</span><span class="n">test</span><span class="o">-</span><span class="n">temperature_conversion.R</span><span class="o">:</span><span class="m">30</span><span class="o">:</span><span class="m">5</span><span class="p">)</span><span class="o">:</span> <span class="n">Fahrenheit</span> <span class="n">to</span> <span class="n">Celsius</span> <span class="n">wrong</span>
<span class="n">`x`</span> <span class="n">not</span> <span class="n">equal</span> <span class="n">to</span> <span class="n">`expected`.</span>
<span class="m">1</span><span class="o">/</span><span class="m">1</span> <span class="n">mismatches</span>
<span class="p">[</span><span class="m">1</span><span class="p">]</span> <span class="m">10</span> <span class="o">-</span> <span class="m">2</span> <span class="o">==</span> <span class="m">8</span>
<span class="n">Backtrace</span><span class="o">:</span>
    â–†
 <span class="m">1</span><span class="n">.</span> â””â”€<span class="n">testthat</span><span class="o">::</span><span class="nf">expect_that</span><span class="p">(</span><span class="n">object</span> <span class="o">=</span> <span class="n">temp_F</span><span class="p">,</span> <span class="n">condition</span> <span class="o">=</span> <span class="nf">equals</span><span class="p">(</span><span class="m">2</span><span class="p">))</span> <span class="n">at</span> <span class="n">test</span><span class="o">-</span><span class="n">temperature_conversion.R</span><span class="o">:</span><span class="m">30</span><span class="o">:</span><span class="m">4</span>
 <span class="m">2</span><span class="n">.</span>   â””â”€<span class="nf">testthat </span><span class="p">(</span><span class="n">local</span><span class="p">)</span> <span class="nf">condition</span><span class="p">(</span><span class="n">object</span><span class="p">)</span>
 <span class="m">3</span><span class="n">.</span>     â””â”€<span class="n">testthat</span><span class="o">::</span><span class="nf">expect_equal</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">expected</span><span class="p">,</span> <span class="kc">...</span><span class="p">,</span> <span class="n">expected.label</span> <span class="o">=</span> <span class="n">label</span><span class="p">)</span>

<span class="p">[</span> <span class="n">FAIL</span> <span class="m">1</span> <span class="o">|</span> <span class="n">WARN</span> <span class="m">0</span> <span class="o">|</span> <span class="n">SKIP</span> <span class="m">0</span> <span class="o">|</span> <span class="n">PASS</span> <span class="m">4</span> <span class="p">]</span>
<span class="n">Error</span><span class="o">:</span> <span class="n">Test</span> <span class="n">failures</span>
</pre></div>
</div>
</section>
</section>
<section id="continuous-testing">
<h2>Continuous testing<a class="headerlink" href="#continuous-testing" title="Permalink to this heading">#</a></h2>
<p>Unitill now you have been resonsible for running the tests. If youâ€™re disciplined then you ran them (and fixed errors) before you committed new code to your repository. There is an easier way though, with continuous integration (or CI) of tests.</p>
<p>There are a number of services out there that will do this, but the most common to use is GitHubâ€™s Actions. THis allows you to add the tests at any point (e.g. when committing, or at a pull request) and is faily simple to set up.</p>
<section id="adding-a-workflow-to-your-repoistory">
<h3>Adding a workflow to your repoistory<a class="headerlink" href="#adding-a-workflow-to-your-repoistory" title="Permalink to this heading">#</a></h3>
<p>On GitHub, go to your respository and open the actions tab:</p>
</section>
</section>
</section>


                </article>
              

              
              
              
              
                <footer class="prev-next-footer">
                  
<div class="prev-next-area">
    <a class="left-prev"
       href="Spreadsheets_data.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title">Moving from spreadsheets to data</p>
      </div>
    </a>
    <a class="right-next"
       href="Software_development.html"
       title="next page">
      <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">Software development</p>
      </div>
      <i class="fa-solid fa-angle-right"></i>
    </a>
</div>
                </footer>
              
            </div>
            
            
              
                <div class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">

  <div class="sidebar-secondary-item">
  <div class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> Contents
  </div>
  <nav class="bd-toc-nav page-toc">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#simple-testing">Simple testing</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#regression-tests">Regression tests</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#unit-tests">Unit tests</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#static-tests">Static tests</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#ui-tests">UI tests</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#testing-frameworks">Testing frameworks</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#python-pytest">Python: pytest</a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#r-testthat">R: testthat</a></li>
</ul>
</li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#continuous-testing">Continuous testing</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#adding-a-workflow-to-your-repoistory">Adding a workflow to your repoistory</a></li>
</ul>
</li>
</ul>
  </nav></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
<div class="bd-footer-content__inner container">
  
  <div class="footer-item">
    
<p class="component-author">
By Jon Hill
</p>

  </div>
  
  <div class="footer-item">
    

  <p class="copyright">
    
      Â© Copyright 2023, Jon Hill.
      <br/>
    
  </p>

  </div>
  
  <div class="footer-item">
    
  </div>
  
  <div class="footer-item">
    
  </div>
  
</div>
          </footer>
        

      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="_static/scripts/bootstrap.js?digest=5b4479735964841361fd"></script>
<script src="_static/scripts/pydata-sphinx-theme.js?digest=5b4479735964841361fd"></script>

  <footer class="bd-footer">
  </footer>
  </body>
</html>